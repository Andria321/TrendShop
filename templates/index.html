{% extends "base.html" %}

{% block title %} Home Page {% endblock %}

{% block container %}


<div class="row m-2">
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% for category, message in messages %}
                {% if messege %}
            <div class="alert alert-{{ category }}">
                {{ message }}
            </div>
            {% endif %}
        {% endfor %}
    {% endwith %}
</div>


        <div class="mx-auto mt-4" style="max-width: 500px; margin: 0px auto">
    <div id="carouselExampleIndicators" class="carousel slide">
      <h3>ჩვენი ახალი პროდუქცია:</h3>
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"></button>
        </div>

        <div class="carousel-inner rounded-4">
            <div class="carousel-item active">
                <img src="/static/images/Zeda.jpg" class="d-block w-100" alt="">
            </div>
            <div class="carousel-item">
                <img src="/static/images/Random Zeda.jpg" class="d-block w-100" alt="">
            </div>
            <div class="carousel-item">
                <img src="/static/images/Jacket 1.webp" class="d-block w-100" alt="">
            </div>
        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>

        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>
    </div>
</div>
<div class="container mt-5">
    <div class="row g-4"> 
        {% for product in products %}
        <div style="width: 18%;" class="col-12 col-sm-6 col-md-4 col-lg-3">
            <div class="card h-100 product1 product" style="width: 100%; margin-bottom: 5%;">
                <img src="/static/images/{{product['image'] }}" class="card-img-top" alt="">
                <div class="card-body d-flex flex-column justify-content-left">
                    <h5 class="card-title">{{ product['price'] }}₾</h5>
                    <p class="card-text">{{ product['name'] }}</p>
                    <a href="/details/{{ product['id'] }}" class="btn btn-outline-secondary mb-2">ნახვა</a>
                    <div class="container">
                    {% if current_user.is_authenticated %}
                    <form action="/add_to_cart/{{ product.id }}" method="post">
                    <input type="hidden" name="item_id" value="{{ product.id }}">
                     <button type="submit" class="btn btn-outline-success mb-2">კალათაში დამატება</button>
                        </form>
                    <div class="mt-4 btn">
                        <a href="/pay" class="btn btn-outline-success mb-2">შეძენა</a>
                    </div>
                    {% endif %}
                        </div>
                    {% if current_user.role == "Admin" %}
                        <a href="/delete/{{ product['id'] }}" class="btn btn-outline-danger">წაშლა</a>
                    {% elif current_user.role == "Moderator" %}
                        <a href="/edit_product/{{ product['id'] }}" class="btn btn-outline-info">რედაქტირება</a>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}